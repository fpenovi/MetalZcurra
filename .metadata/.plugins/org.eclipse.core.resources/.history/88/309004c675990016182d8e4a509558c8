/*
 * Servidor.cpp
 *
 *  Created on: Oct 23, 2016
 *      Author: franch
 */

#include <stddef.h>
#include <stdio.h>
#include <pthread.h>
#include <iostream>

using namespace std;


typedef struct control {
	bool* quit;
} control_t;


void* threadFunction(void* arg) {

	bool* quit = ((control_t*) arg)->quit;
	char input;

	while (!*quit){
		input = fgetc(stdin);

		if (input == '*')
			break;
	}

	*quit = true;
	return ((void*) "Hola wacho!");
}


int main() {

	pthread_t* thread = new pthread_t;
	control_t* arg = new control_t;
	bool asd = false;
	arg->quit = &asd;

	pthread_create(thread, NULL, threadFunction, arg);

	while (!(*(arg->quit))){}


	void* result;
	pthread_join(*thread, &result);
	cout << "Sali del thread" << endl;

	cout << "Resultado del thread: " << ((char*)result) << endl;
	delete thread;
	delete arg;
	return 0;
}
